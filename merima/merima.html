<!DOCTYPE html>
<head>
    <style>
        #RedBoxID
        {
            width: 50px;
            height: 50px;
            background-color: red;
            position: absolute;
            color:white;
        }
        .BlackBox
        {
            width: 50px;
            height: 50px;
            background-color: black;
            position: absolute;
            color:white;
            border-radius: 0;
            transition: 1s;
        }
        #InfoBoxID
        {
            width: 300px;
            position: fixed;
            right: 5px;
            bottom: 5px;
            border: 2px solid green;
        }
        body{overflow: hidden;}
    </style>
</head>
<body>
<button onclick="idiLijevo(RedBox)">lijevo</button>
<button onclick="idiDesno(RedBox)">desno</button>
<button onclick="idiGore(RedBox)">gore</button>
<button onclick="idiDole(RedBox)">dole</button>

<div id="RedBoxID">
</div>

<div id="InfoBoxID">
    <button onclick="ClickStart()">Start</button>
    <button onclick="ClickStop()">Stop</button>

    Proteklo sekundi:
    <span id="sekInfo">0</span>
</div>

</body>

<script>
    var RedBox = document.getElementById("RedBoxID");
    //  var BlackBox = document.getElementById("BlackBoxID");

    RedBox.style.top = "0px";
    RedBox.style.left = "0px";
    //   BlackBox.style.top = "0px";
    //   BlackBox.style.left = "100px";

    var mojInterval;
    function ClickStart()
    {
        mojInterval = setInterval(timerFunkcija, 100);
    }

    function ClickStop()
    {
        clearInterval(mojInterval);
    }

    function idiLijevo(box)
    {
        var a = parseInt(box.style.left) ;
        a = a -30;
        if (a<0)
            a = document.documentElement.clientWidth;
        box.style.left = a + "px";
    }

    function idiGore(box)
    {
        var a = parseInt(box.style.top) ;
        a = a -30;
        if (a<0)
            a = document.documentElement.clientHeight;
        box.style.top = a + "px";
    }

    function idiDesno(box)
    {
        var a = parseInt(box.style.left) ;
        a = a +30;
        if (a>document.documentElement.clientWidth)
            a = 0;
        box.style.left = a + "px";
    }

    function idiDole(box)
    {
        var a = parseInt(box.style.top) ;
        a = a +30;
        if (a>document.documentElement.clientHeight)
            a = 0;
        box.style.top = a + "px";
    }

    document.onkeydown = function (e) {
        console.log("Pritisnuta je tipka---> Naziv: " + e.key + ", code: "  + e.keyCode);
        if (e.key == "ArrowLeft") idiLijevo(RedBox);
        if (e.key == "ArrowRight") idiDesno(RedBox);
        if (e.key == "ArrowUp") idiGore(RedBox);
        if (e.key == "ArrowDown") idiDole(RedBox);
        //  JelKolizija();
    };

    function jelPreklapanje(A1, A2, B1, B2) {
        if (A2.x < B1.x) return false;
        if (B2.x < A1.x) return false;
        if (A2.y < B1.y) return false;
        if (B2.y < A1.y) return false;
        return true;
    }

    function Tacka(x, y)
    {
        this.x = parseInt(x);
        this.y = parseInt(y);
    }


    function JelKolizija(BlackBox)
    {
        var A1 = new Tacka(RedBox.style.left, RedBox.style.top);
        var A2 = new Tacka(
            parseInt(RedBox.style.left) + 50,
            parseInt(RedBox.style.top) + 50
        );

        var B1 = new Tacka(BlackBox.style.left, BlackBox.style.top);

        var B2 = new Tacka(
            parseInt(BlackBox.style.left) + 50,
            parseInt(BlackBox.style.top) + 50
        );

        if (jelPreklapanje(A1, A2, B1, B2))
        {
            sekunde -= 10;
        }

    }

    function pomjeriBoxRandom(box)
    {
        var x = Math.floor(Math.random() * 4);
        if (x==1) idiDesno(box);
        if (x==2) idiLijevo(box);
        if (x==3) idiGore(box);
        if (x==4) idiDole(box);

    }

    var sekunde = 0;
    function timerFunkcija() {
        sekunde++;
        //preko objekat.innerHTML evidentirati sekunde u neki html element, npr. span
        document.getElementById("sekInfo").innerHTML = sekunde/10.;

        var X = document.getElementsByClassName("BlackBox");
        for (var i = 0; i < X.length; i++) {
            var x = X[i];
            pomjeriBoxRandom(x);
            JelKolizija(x);
        }

    }
    function dodajCrniBox()
    {
        var x = document.createElement('div');
        x.className = "BlackBox";
        x.innerHTML = "ovo je box 1";
        x.style.left="0px";
        x.style.top="0px";
        document.body.appendChild(x);
    }

    dodajCrniBox();
    dodajCrniBox();
    dodajCrniBox();
    dodajCrniBox();
    dodajCrniBox();

</script>
</html>


